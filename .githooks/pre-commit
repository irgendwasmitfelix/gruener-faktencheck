#!/bin/bash
# Pre-commit hook: Generiert Sitemap und Static HTML vor dem Commit

echo "ðŸ”„ Generiere Sitemap und Static HTML..."

# PrÃ¼fe ob Python installiert ist
if ! command -v python3 &> /dev/null && ! command -v python &> /dev/null; then
    echo "âŒ Python nicht gefunden! Bitte Python installieren."
    exit 1
fi

# Bestimme Python-Befehl
PYTHON_CMD=$(command -v python3 || command -v python)

# FÃ¼hre Scripts aus
$PYTHON_CMD generate_sitemap.py
if [ $? -ne 0 ]; then
    echo "âŒ generate_sitemap.py fehlgeschlagen!"
    exit 1
fi

$PYTHON_CMD generate_static_html.py
if [ $? -ne 0 ]; then
    echo "âŒ generate_static_html.py fehlgeschlagen!"
    exit 1
fi

# FÃ¼ge generierte Dateien zum Commit hinzu
git add public/sitemap.xml
git add -A static/ 2>/dev/null || true

echo "âœ… Sitemap und Static HTML aktualisiert!"
exit 0
